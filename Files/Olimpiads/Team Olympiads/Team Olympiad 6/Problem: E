#include <iostream>
#include <string>
using namespace std;
string rep(string s,string b){
	int pos;
	do{
		pos=s.find(b);
		if (pos!=-1)
		s.replace(pos,b.size(),"");
	} while (pos!=-1);
	return s;
}

void oper3(string s,int b,int *k){
	for(int i=0;i<s.size()-b-1;i++){
		for(int j=b-1;j<s.size()-1;j++){
			if (s.substr(i,i+b)=s.substr(j,j+b))
			*k++;
		}
	}
}

int main() {
    int n,k;
	string str;
	cin>>n;
    for(int i=0;i<n;i++){
    	int a;
    	string b;
    	cin>>a>>b;
    	if (a==1)
    		str+=b;
    	if (a==2)
    		str=rep(str,b);
    	else{
    		int g=(int)b-48;
    		oper3(str,g,&k);
    		cout<<k;
        k=0;
		}
	}
	cout<<str;
    return 0;
}
